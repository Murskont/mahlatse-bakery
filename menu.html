<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Mahlatse's Dine Restaurant - Menu & Order</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>

<body>

  <!-- NAVBAR -->
  <header class="header">
    <nav class="navbar">
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="menu.html">Menu</a>
        <a href="about.html">About Us</a>
      </div>

      <div class="right-icons">
        <div class="search-box">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input type="text" placeholder="Search our menu">
        </div>
        <i class="fa-solid fa-utensils"></i>
        <div class="cart-icon">
          <i class="fa-solid fa-cart-shopping"></i>
          <span>0</span>
        </div>
      </div>
    </nav>

  </header>

  <!-- MAIN CONTENT -->
  <main>
    <h2 class="section-heading">Our Menu & Place Order</h2>

    <div class="order-container">

      <!-- ORDER FORM -->
      <form id="orderForm" autocomplete="off">
        <label for="item" class="label-bold">Select Item:</label>
        <select id="item" name="item" required>
          <option value="" disabled selected>Select an item</option>
          <option value="Bread" data-price="35">Bread - R35.00</option>
          <option value="Cold Drinks" data-price="25">Cold Drinks - R25.00</option>
          <option value="Cake" data-price="65">Cake - R65.00</option>
          <option value="Pie" data-price="75">Pie - R75.00</option>
        </select>

        <label for="quantity" class="label-bold">Quantity:</label>
        <input type="number" id="quantity" name="quantity" min="1" value="1" required />

        <label for="name" class="label-bold">Your Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your full name" required />

        <label for="phone" class="label-bold">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required pattern="[0-9]{10,15}"
          title="Please enter a valid phone number" />

        <button type="submit" class="btn-primary">Add to Order Slip</button>
      </form>

      <!-- ORDER SLIP -->
      <aside class="order-slip">
        <h3>Your Order Slip</h3>
        <ul id="orderItems">
          <li>No items added yet.</li>
        </ul>
        <div class="total" id="orderTotal">Total: R0.00</div>
        <button id="submitOrderBtn" disabled>Submit Order</button>
      </aside>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2025 Mahlatse's Dine Restaurant. All Rights Reserved.</p>
  </footer>
  <script>
    const orderForm = document.getElementById('orderForm');
    const orderItemsList = document.getElementById('orderItems');
    const orderTotalEl = document.getElementById('orderTotal');
    const submitOrderBtn = document.getElementById('submitOrderBtn');

    let orderItems = [];

    function updateOrderSlip() {
      orderItemsList.innerHTML = '';

      if (orderItems.length === 0) {
        orderItemsList.innerHTML = '<li>No items added yet.</li>';
        orderTotalEl.textContent = 'Total: R0.00';
        submitOrderBtn.disabled = true; // disable button when no items
        return;
      }

      let total = 0;
      orderItems.forEach((item, index) => {
        const li = document.createElement('li');
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        li.innerHTML = `
      <span class="qty">${item.quantity}x</span> ${item.name} - R${item.price.toFixed(2)} each
      <button class="remove-btn" title="Remove item" data-index="${index}">&times;</button>
    `;

        orderItemsList.appendChild(li);
      });

      orderTotalEl.textContent = `Total: R${total.toFixed(2)}`;
      submitOrderBtn.disabled = false; // enable button when items exist

      // Attach remove handlers to all remove buttons
      document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = e.target.getAttribute('data-index');
          orderItems.splice(idx, 1);
          updateOrderSlip();
        });
      });
    }

    orderForm.addEventListener('submit', function (e) {
      e.preventDefault();

      const selectedOption = this.item.options[this.item.selectedIndex];
      const name = selectedOption.value;
      const price = parseFloat(selectedOption.getAttribute('data-price'));
      const quantity = parseInt(this.quantity.value);

      if (!name || quantity < 1) {
        alert('Please select a valid item and quantity.');
        return;
      }

      // Add or update existing item quantity
      const existingIndex = orderItems.findIndex(item => item.name === name);
      if (existingIndex !== -1) {
        orderItems[existingIndex].quantity += quantity;
      } else {
        orderItems.push({ name, price, quantity });
      }

      updateOrderSlip();

      // Reset select and quantity inputs only
      this.item.selectedIndex = 0;
      this.quantity.value = 1;
    });

    submitOrderBtn.addEventListener('click', () => {
      if (orderItems.length === 0) return;

      const customerName = orderForm.name.value.trim();
      const customerPhone = orderForm.phone.value.trim();

      if (!customerName || !customerPhone) {
        alert('Please fill in your name and phone number before submitting the order.');
        return;
      }

      // Create order summary text
      let summary = `Order Summary for ${customerName} (Phone: ${customerPhone}):\n\n`;
      orderItems.forEach(item => {
        summary += `${item.quantity} x ${item.name} @ R${item.price.toFixed(2)} each = R${(item.price * item.quantity).toFixed(2)}\n`;
      });

      const totalPrice = orderItems.reduce((acc, item) => acc + item.price * item.quantity, 0);
      summary += `\nTotal Price: R${totalPrice.toFixed(2)}`;

      alert(summary + '\n\nThank you for your order!');

      // Clear all after submission
      orderItems = [];
      updateOrderSlip();
      orderForm.name.value = '';
      orderForm.phone.value = '';
    });

  </script>
</body>

</html>
